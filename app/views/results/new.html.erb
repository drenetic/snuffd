<%= simple_form_for @result, html: {id: 'result'} do |f| %>
  <%= f.input :test_date, label:'When was this test taken?', as: :date %>
  <%= f.input :next_test_date, label:'When is the followup test due?', as: :date %>
  <%= f.button :submit, "Submit", id: "submit_button" %>
<% end %>

<%= simple_form_for @results_infection, html: {id: 'result_infection'}, url: results_path, method: :post  do |f|  %>
  <%= f.input :infection_id, label:'Please tick to indicate a new Entry', collection: Infection.all.order(:name), as: :radio_buttons %>
  <%= f.input :status, as: :radio_buttons, collection: [['Postive', 'positive'], ['Negative', 'negative']], label: "Are you negative or positive?" %>
  <%= f.input :is_treated, as: :radio_buttons, collection: [['Yes', true], ['No', false]], label: "Are you getting treatment?" %>
<% end %>

<script>
  let result_infection = document.getElementById("result_infection");
  let result = document.getElementById("result");
  result.innerHTML = result.innerHTML + result_infection.innerHTML;
  result_infection.innerHTML = ""

  var token = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
  var hiddenInput = document.createElement('input');
  hiddenInput.setAttribute('type', 'hidden');
  hiddenInput.setAttribute('name', 'authenticity_token');
  hiddenInput.setAttribute('value', token);
  parentForm.appendChild(hiddenInput);

  var submitButton = document.getElementById("submit_button");
  submitButton.addEventListener("click", function() {
    result.submit();
  });
</script>
